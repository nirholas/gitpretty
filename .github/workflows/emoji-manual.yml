# ðŸŽ¨ Manual Emoji Commits - Run on demand
# Trigger this workflow manually to add emojis to all files
name: ðŸŽ¨ Manual Emoji All Files

on:
  workflow_dispatch:
    inputs:
      emoji_style:
        description: 'Emoji style'
        required: true
        default: 'tech'
        type: choice
        options:
          - tech
          - nature
          - celebration
          - all

jobs:
  emoji-all:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
      - name: ðŸ“¥ Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: ðŸ”§ Configure Git
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"

      - name: ðŸŽ¨ Select emoji set
        id: emojis
        run: |
          case "${{ inputs.emoji_style }}" in
            tech)
              echo 'set=â­ ðŸŒŸ âœ¨ ðŸ’« ðŸš€ ðŸ› ï¸ âš™ï¸ ðŸ”§ ðŸ”© â›ï¸ ðŸ”¨ ðŸ’» ðŸ–¥ï¸ ðŸ’¾ ðŸ“± ðŸ”Œ ðŸ’¡ ðŸ”‹' >> $GITHUB_OUTPUT
              ;;
            nature)
              echo 'set=ðŸŒ± ðŸŒ¿ ðŸ€ ðŸŒ² ðŸŒ³ ðŸŒ´ ðŸŒµ ðŸŒ¸ ðŸŒº ðŸŒ» ðŸŒ¼ ðŸŒ· ðŸŒ¹ ðŸƒ ðŸ‚ ðŸ ðŸŒŠ ðŸ’§' >> $GITHUB_OUTPUT
              ;;
            celebration)
              echo 'set=ðŸŽ‰ ðŸŽŠ ðŸŽˆ ðŸŽ ðŸŽ€ ðŸŽ„ ðŸŽƒ ðŸŽ—ï¸ ðŸŽŸï¸ ðŸ† ðŸ… ðŸ¥‡ ðŸ¥ˆ ðŸ¥‰ ðŸŽ–ï¸ ðŸŽ¯ ðŸŽ® ðŸŽ²' >> $GITHUB_OUTPUT
              ;;
            all)
              echo 'set=â­ ðŸŒŸ âœ¨ ðŸ’« ðŸŒ  ðŸ”† ðŸ”… ðŸš€ ðŸ› ï¸ âš™ï¸ ðŸ”§ ðŸ”© â›ï¸ ðŸ”¨ ðŸª› ðŸªš ðŸ”— ðŸ’Ž ðŸ”· ðŸ”¶' >> $GITHUB_OUTPUT
              ;;
          esac

      - name: ðŸŽ¯ Add emoji commits to all files
        run: |
          EMOJI_STRING="${{ steps.emojis.outputs.set }}"
          IFS=' ' read -ra EMOJIS <<< "$EMOJI_STRING"
          
          INDEX=0
          for file in $(git ls-files); do
            if [ -f "$file" ]; then
              EMOJI="${EMOJIS[$INDEX % ${#EMOJIS[@]}]}"
              NAME=$(basename "$file")
              
              echo "" >> "$file"
              git add "$file"
              git commit -m "$EMOJI $NAME" --quiet || true
              
              echo "[$((INDEX+1))] $EMOJI $file"
              ((INDEX++))
            fi
          done

      - name: ðŸ“¤ Push changes
        run: git push origin HEAD:${{ github.ref_name }}

